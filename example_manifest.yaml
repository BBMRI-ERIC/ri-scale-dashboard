# yaml
manifest_id: "id2025-11-13"
created_by: "user@example.org"
created_at: "2025-11-13T10:00:00Z"


sources:
  - source_name: source1
    type: discovery
    path: "./data/"
    params:
      # data_type: "wsi" # Set datatype to load data automatically on access
      include: "*.svs"
      recursive: false
      column_name: "path"
      id_pattern: "^(?P<slide_id>.+?)(?=\\.svs$)" 

  - source_name: source2
    type: csv_file
    path: "./data/labels.csv"
    params:
      key_field: "slide_id"
      delimiter: ","
      header: true

job_steps:
  - step_name: convert to dicom              # basic command call example
    enabled: true
    params:
      input_source_name: source1
      output_source_name: source1
      input_column_name: path
      output_column_name: dicom_path
      # input_path: "./data/{slide_id}.svs"
      # output_path: "./data/{slide_id}.dcm"
      # command: "dcmconv -i {input_folder} -o {output_folder}"
      command: "dcmconv -i {input_file} -o {output_file}"
  - step_name: join                          # data merge example
    enabled: true
    params:
      left_source_name: source1
      right_source_name: source2
      output_source_name: source1_source2_joined
      left_key: slide_id
      right_key: slide_id
      join_type: inner
      missing_policy: drop
